<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

function populateGroups(obj) {
	obj.response.forEach((group) => {
		var opt = document.createElement("option");
		opt.value = group.id;
		opt.innerHTML = group.name + "; " + group.id
		document.getElementById('group-select').appendChild(opt);
	});
}

async function getGroups(token) {
	console.log('Getting user groups...');
	const response = await fetch('https://api.groupme.com/v3/groups?token='+token, {
	    method: 'GET',
	    headers: {
	      'Content-Type': 'application/json'
	    }
	  });
	const myJson = await response.json();
	populateGroups(myJson);
}
</script>
</head>
<body>

<h1>INDEV GroupMe Message Search Tool</h1>

<label for="token">Access Token: </label>
<input type="text" id="token">

<button type="button"
onclick="getGroups(document.getElementById('token').value);">
Get groups</button>

<label for="group-select">Choose a group: </label>
<select id="group-select">
	<option value=""><i>Not Selected</i></option>
</select>

<label for="search">Search: </label>
<input type="text" id="search">

</body>
</html> 
